<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            background-color: #E4E9F3;
        }
        * {
            box-sizing: border-box;
        }
        form {
            display: flex;
            flex-direction: column;
            max-width: 300px;
            margin: 1em auto;
            padding: 1em;
            font-family: Arial, Helvetica, sans-serif;
        }

        .ibj-frm-products__select {
            max-height: 90vh;
            margin-bottom: 8px;
        }
        .ibj-frm-products__select a,
        .ibj-frm-products__select a:active,
        .ibj-frm-products__select a:link,
        .ibj-frm-products__select a:visited,
        .ibj-frm-products__select a:hover,
        .ibj-frm-products__select a:target
        {
            text-decoration: none;
            color: #000f6c;
        }
        .ibj-frm-products__select-open {
            margin: 0;
        }
        .ibj-frm-products__select-open-btn {
            padding: 8px;
            display: flex;
            position: relative;
            align-items: center;
            justify-content: space-between;
            font-size: 16px;
            line-height: 1em;
            color: #fff;
            background-color: #3794db;
            border-radius: 4px;
            box-shadow: 0 0px 8px rgba(0 0 0 /25%);
        }
        .ibj-frm-products__select a.ibj-frm-products__select-open-btn:active,
        .ibj-frm-products__select a.ibj-frm-products__select-open-btn:link,
        .ibj-frm-products__select a.ibj-frm-products__select-open-btn:visited,
        .ibj-frm-products__select a.ibj-frm-products__select-open-btn:hover,
        .ibj-frm-products__select a.ibj-frm-products__select-open-btn:target{
            color: #fff;
        }
        .ibj-frm-products__select a.ibj-frm-products__select-open-btn:hover{
            background-color: #48A5EA;
        }

        .ibj-frm-products__select-open-btn::after {
            display: block;
            content: "▾";
            font-size: 18px;
            line-height: 16px;
            height: 16px;
            width: 16px;
            text-align: center;
        }
        .ibj-frm-products__select-close-btn {
            display: block;
            height: 48px;
        }
        .ibj-frm-products__select-popup {
            position: relative;
        }
        .ibj-frm-products__options-popup-box {
            position: absolute;
            z-index: 999;
            width: 100%;
            height: 0;
            transition: height 300ms;
            overflow: hidden;
            border-radius: 4px;
            box-shadow: 0 0px 8px rgba(0 0 0 /25%);
        }
        .ibj-frm-products__options-popup-box:target {
            height: 60vh;
        }
        .ibj-frm-products__options-popup-box:target .ibj-frm-products__select-open-btn {
            border-radius: 4px 4px 0px 0px;
        }
        .ibj-frm-products__options {
            overflow: auto;
            overflow-x: hidden;
            max-height: 60vh;
            width: 100%;
        }
        .ibj-frm-products__option {
            display: grid;
            grid-template-columns:45% auto;
            grid-template-rows: 17px 17px;
            background-color: #fff;
        }
        .ibj-frm-products__option:nth-of-type(odd) {
            background-color:#E4E9F3;
        }
        .ibj-frm-products__option-model {
            font-weight: bold;
            font-size:22px;
            grid-column: 1/2;
            grid-row: 1/3;
            align-self: center;
            padding-left: 4px;
        }
        .ibj-frm-products__option-pump {
            font-size: 12px;
            grid-column: 2/3;
            grid-row: 1/2;
            align-self: end;
        }
        .ibj-frm-products__option-pipe {
            font-size: 12px;
            grid-column: 2/3;
            grid-row: 2/3;
            align-self: start;
        }

        /* Selected Options */

        .ibj-frm-products__selected {
            position: relative;
            max-width: 100%;
        }
        .ibj-frm-products__selected-pre {
            width: 100%;
            border: none;
            background-color: #fff;
            border-radius: 4px;
        }
        .ibj-frm-products__selected-input {
            width: 100%;
            border: none;
            background-color: #fff;
            border-radius: 4px;
            box-shadow: 0 0px 8px rgba(0 0 0 /25%);
        }
    </style>

</head>
<body>
    <p>
        Lorem ipsum, dolor sit amet consectetur adipisicing elit. Laborum amet similique, sunt quaerat voluptas enim quos! Ab recusandae eveniet dolores minus et quam fugiat, repellat quo architecto delectus, similique inventore.
    </p>
<form action="">
    <script type="text/template" id="ibj-frm-products__option-template">
        <a class="ibj-frm-products__option" data-option-idx="{{optionIdx}}" href="#ibj-frm-products__select-open-btn">
            <span class="ibj-frm-products__option-model">{{model}}</span>
            <span class="ibj-frm-products__option-pump">{{pump}}</span>
            <span class="ibj-frm-products__option-pipe">{{pipe}}</span>
        </a>
    </script>
    <div class="ibj-frm-products__select">
        <div class="ibj-frm-products__select-popup">
            <div class="ibj-frm-products__options-popup-box" id="ibj-frm-products__options-popup-box">
                <a class="ibj-frm-products__select-close-btn" href="#ibj-frm-products__select-open-btn"></a>
                <div class="ibj-frm-products__options"></div>
            </div>
        </div>
        <div class="ibj-frm-products__select-open">
            <a class="ibj-frm-products__select-open-btn" id="ibj-frm-products__select-open-btn" href="#ibj-frm-products__options-popup-box">Selecionar e incluir um modelo na lista...</a>
        </div>
    </div>

    <div class="ibj-frm-products__selected">
        <script type="text/template" id="ibj-frm-products__selected-items-template">
            <li class="ibj-frm-products__selected-item">
                <span class="ibj-frm-products__selected-item-model">{{model}}</span>
                <span class="ibj-frm-products__selected-item-pump">{{pump}}</span>
                <span class="ibj-frm-products__selected-item-pipe">{{pipe}}</span>
                <input class="ibj-frm-products__selected-item-qty" type="number" min="1" value="1"/>
                <span class="ibj-frm-products__selected-item-del-btn"></span>
            </li>
        </script>
        <div class="ibj-frm-products__selected-list">

        </div>
        <textarea name="" id="" cols="30" rows="10" class="ibj-frm-products__selected-input"></textarea>
    </div>

</form>

<script>
    window.addEventListener("load", function() {
        (function (){
            var productsArray=[
                ['KA-1',    'THS-18     3.0 cv',    'SUC 2”    REC 1½”'  ],
                ['KA-2',    'THS-18     4.0 cv',    'SUC 2”    REC 1½”'  ],
                ['KA-3',    'THS-18     5.0 cv',    'SUC 2”    REC 1½”'  ],
                ['KA-4',    'THS-18     6.0 cv',    'SUC 2”    REC 1½”'  ],
                ['KA-5',    'THS-18     7.5 cv',    'SUC 2”    REC 1½”'  ],
                ['KA-6',    'THS-18    10.0 cv',    'SUC 2”    REC 1½”'  ],
                ['KA-7',    'THS-18    12.5 cv',    'SUC 2”    REC 1½”'  ],
                ['KA-8',    'THB-18    10.0 cv',    'SUC 3”    REC 2½”'  ],
                ['KA-9',    'THB-18    12.5 cv',    'SUC 3”    REC 2½”'  ],
                ['KA-10',   'THB-18    15.0 cv',    'SUC 3”    REC 2½”'  ],
                ['KA-11',   'THB-18    20.0 cv',    'SUC 3”    REC 2½”'  ],
                ['KA-26',   'TH-18      3,0 cv',    'SUC 2”    REC 2½”'  ],
                ['KA-27',   'THS-18     5,0 cv',    'SUC 2”    REC 2½”'  ],
                ['KA-28',   'THS-18     7,5 cv',    'SUC 2”    REC 2½”'  ],
                ['KA-29',   'THS-18    10,0 cv',    'SUC 2”    REC 2½”'  ],
                ['KR-1',    'B-12-NR    0,5 cv',    'SUC ¾”    REC ¾”'   ],
                ['KR-2',    'TH-16-NR   1,0 cv',    'SUC 1”    REC 1”'   ],
                ['KR-3',    'TH-16-NR   1,5 cv',    'SUC 1¼”   REC 1”'   ],
                ['KR-4',    'TH-16-NR   2,0 cv',    'SUC 1¼”   REC 1”'   ],
                ['KR-5',    'TH-16-NR   3,0 cv',    'SUC 1¼”   REC 1”'   ],
                ['KR-6',    'THS-18-R   5,0 cv',    'SUC 2”    REC 1½”'  ],
                ['KR-7',    'THS-18-R   7,5 cv',    'SUC 2”    REC 1½”'  ],
                ['KR-8',    'THS-18-R  10,0 cv',    'SUC 2”    REC 1½”'  ],
                ['PLUS-1',  'P-11/2     1,0 cv',    'SUC 1”    REC 1”'   ],
                ['PLUS-2',  'P-11/3     1,5 cv',    'SUC 1”    REC 1”'   ],
                ['PLUS-3',  'P-11/3     2,0 cv',    'SUC 1”    REC 1”'   ],
                ['PLUS-4',  'P-11/4     3,0 cv',    'SUC 1”    REC 1”'   ],
                ['PLUS-11', 'P-15/2-F   3,0 cv',    'SUC 1½”   REC 1½”'  ],
                ['PLUS-12', 'P-15/2-K   4,0 cv',    'SUC 1½”   REC 1½”'  ],
                ['PLUS-13', 'P-15/2-N   5,0 cv',    'SUC 1½”   REC 1½”'  ],
                ['PLUS-14', 'P-15/3-K   6,0 cv',    'SUC 1½”   REC 1½”'  ],
            ]
            var elmProductsSelectedText  = document.getElementsByClassName('ibj-frm-products__selected-text')[0]
            var elmProductsOptions       = document.getElementsByClassName('ibj-frm-products__options')[0]
            var optionTemplateStr = document.getElementById("ibj-frm-products__option-template").innerText

            function productsModelSelectAddOptions(optionsArray){
                var bufferOptions = ''
                var bufferOption = ''
                for(var i=0; i < optionsArray.length; i++){
                    bufferOption = optionTemplateStr
                        .replace('{{optionIdx}}', i)
                        .replace('{{model}}', optionsArray[i][0])
                        .replace('{{pump}}', optionsArray[i][1])
                        .replace('{{pipe}}', optionsArray[i][2])
                    bufferOptions += bufferOption
                }
                console.log(bufferOptions)
                elmProductsOptions.innerHTML = bufferOptions
            }

            productsModelSelectAddOptions(productsArray)
        })()
    });
    </script>

</body>
</html>